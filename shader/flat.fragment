#version 130

smooth in vec4 frag_color;
smooth in float intensity;

uniform vec4 ambiance;

void main() {
    vec4 c = (ambiance+(intensity/4)) * frag_color;
    gl_FragColor = ambiance + (c/sqrt(dot(c,c))) + frag_color*intensity/2;
}
